<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>店铺</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
{% block content %}
    <table id="storelist" class="table table-striped table-hover table-bordered">
        <thead>
        <tr>
            <th scope="col">状态</th>
            <th scope="col">编号</th>
            <th scope="col">店名</th>
            <th scope="col">工程部负责人</th>
            <th scope="col">安装日期</th>
            <th scope="col">开业日期</th>
            <th scope="col">网段</th>
            <th scope="col">联系人</th>

        </tr>
        </thead>
        <tbody>
        {% for store in object_list %}
            <tr>
                <td width="60">{{ store.status }}</td>
                <td width="80"><a href="{% url 'detail' store.code %}">{{ store.code }}</a></td>
                <td>{{ store.name }}</td>
                <td>{{ store.engineering_head }}</td>
                <td>{{ store.DateField }}</td>
                <td>{{ store.expected_installation_date }}</td>
                <td>{{ store.ip }}</td>
                <td>{{ store.contacts }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/1.10.15/css/jquery.dataTables.css">
<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="http://cdn.datatables.net/1.10.15/js/jquery.dataTables.js"></script>

<script>
    $(document).ready(function () {
        $('#storelist').DataTable({
            "stateSave": true,
            "searchDelay": 100,
            "caseInsensitive": false,
            columnDefs: [
                {
                    "targets": 0,
                    "searchable": false,
                    render: function (data, type, row, meta) {
                        let node = "<label ";
                        if (data === "4") {
                            node += "style='color:red;'>闭店"
                        } else if (data === "2") {
                            node += "style='color:green;'>正常"
                        } else if (data === "3") {
                            node += "style='color:green;'>护肤"
                        } else {
                            node += "style='color:#000;'>筹备"
                        }
                        node += "</label>";
                        return node;
                    }
                },
                {
                    "targets": 1,
                    "searchable": false,
                },
                {
                    "targets": 2,
                    "searchable": false,
                },
            ]
        });

    });
</script>
</body>
</html>