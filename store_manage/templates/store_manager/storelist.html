<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>店铺列表</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
</head>
<body>
{% block content %}
    <table id="storelist" class="table table-striped table-hover table-bordered table-condensed">
        <thead>
        <tr>
            <th scope="col" width="60em">状态</th>
            <th scope="col" width="80em">编号</th>
            <th scope="col">店名</th>
            <th scope="col" width="120em">安装日期</th>
            <th scope="col" width="120em">开业日期</th>
            <th scope="col" width="130em">网段</th>
            <th scope="col" width="100em">客用wifi</th>
            <th scope="col">工程部</th>
            <th scope="col">联系人</th>

        </tr>
        </thead>
        <tbody>
        {% for store in object_list %}
            <tr>
                <td>
                    {% if store.status == "4" %}
                        <label style='color:red'>闭店</label>
                    {% elif store.status == "2" %}
                        <label style='color:green'>正常</label>
                    {% elif store.status == "3" %}
                        <label style='color:sandybrown'>护肤</label>
                    {% elif store.status == "1" %}
                        <label style='color:darkorange'>筹备</label>
                    {% endif %}
                </td>
                <td><a href="{% url 'detail' store.code %}">{{ store.code }}</a></td>
                <td data-toggle="popover" data-trigger="hover" data-code="{{ store.code }}"
                    title="Popover title">
                    <a target="_blank" href="{% url 'detail' store.code %}">{{ store.name }}</a>
                    {% if store.is_date_new %}
                        <img src="{% static 'store_manage/new.png' %}" alt="new" height="20em"/>
                    {% endif %}
                </td>
                <td>{{ store.expected_installation_date|date:"Y/m/d" }}
                    |{{ store.expected_installation_date|timeuntil }} </td>
                <td>{{ store.Opening_date|date:"Y/m/d" }}</td>
                <td>{{ store.ip }}</td>
                <td>
                    {% if store.guest_wifi == 1 %}
                        <label style='color:green'>有</label>
                    {% endif %}
                </td>
                <td>{{ store.engineering_head }}</td>
                <td>{{ store.contacts }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
{% endblock %}
<!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
<script>
    $(function () {
        $('[data-toggle="popover"]').popover({
            html: true,
            placement: 'auto right',
            container: 'body',
            template: '<div class="popover" style="max-width: 450px">' +
                '<div class="arrow"></div><div class="popover-inner">' +
                '<h3 class="popover-title"></h3><div class="popover-content">' +
                '<p></p></div></div></div>',
            content: function () {
                $.ajax({
                    url: 'popoverHtml/'+this.dataset["code"],
                    dataType: 'html',
                    success: function (html) {
                        {#console.log(html)#}
                        {#$('.popover-content').empty();#}

                        //Fill in content with new AJAX data
                        $('.popover-content').html(html);
                        {#console.log($('.popover-content').html())#}
                    }
                })
            }
        })

    })

    function myFunction() {
        return "Hello World!";
    }
</script>
</body>
</html>